import{S as f}from"./sweetalert2.all-6m_Z_jZk.js";import{m as A,_ as C,c as v,b as a,w as h,F as B,r,o as w,a as e,n as _,e as x,v as F,f as k,p as y,d as E}from"./index-sE4Sgqq7.js";import{u as S}from"./userAuthStore-cQpMH4Ah.js";const V="https://hexschool-freyja.onrender.com/api/v1/",U={data(){return{userAccount:{email:"",password:""},loginSetting:{isRememberAccount:!1}}},methods:{...A(S,["getUserEmail"]),userLogin(){let t=this.userAccount,o={"Content-Type":"application/json",Accept:"application/json"};console.log("this.userAccount",this.userAccount),console.log("data",t),this.$refs.myForm&&this.$refs.myForm.validate().then(m=>{m.valid&&this.axios.post(`${V}user/login`,t,{headers:o}).then(s=>{console.log("res",s),console.log("res",JSON.stringify(s.data)),s.data.status?(console.log("res",s),console.log("res",JSON.stringify(s.data)),document.cookie=`loginToken=${s.data.token};  path=/ ;`,document.cookie=`userInfo=${JSON.stringify(s.data.result)};  path=/ ;`,this.$router.push({name:"userCenter"})):f.fire({icon:"error",iconColor:"#dc3545",title:s.data.message,showConfirmButton:!1,width:"400px",customClass:{title:"fs-4"}})}).catch(s=>{console.log("err",s),f.fire({icon:"error",iconColor:"#C22538",title:s.response.data.message,showConfirmButton:!1,width:"400px",customClass:{title:"fs-4"}})})}),this.loginSetting.isRememberAccount==!0?document.cookie=`userEmail=${this.userAccount.email};  path=/ ;`:document.cookie="userEmail=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;"}},mounted(){if(this.getUserEmail()){this.loginSetting.isRememberAccount=!0;const t=this.getUserEmail();this.userAccount.email=t!==null?t:""}}},n=t=>(y("data-v-1b9e4cfe"),t=t(),E(),t),R=n(()=>e("span",{class:"text-primary"},"享樂酒店，誠摯歡迎",-1)),N=n(()=>e("h1",{class:"mb-7"},"立即開始旅程",-1)),I={class:"row g-2 d-flex flex-column"},L={class:"col mb-3"},T=n(()=>e("label",{class:"form-label",for:"email"},"電子信箱",-1)),j={class:"col mb-3"},J=n(()=>e("label",{class:"form-label",for:"password"},"密碼",-1)),D={class:"mt-3 d-flex justify-content-between"},M={class:"form-check"},O=n(()=>e("label",{class:"form-check-label",for:"isRememberAccount"}," 記住帳號",-1)),$=n(()=>e("span",{class:"text-decoration-underline text-primary pointer"},"忘記密碼？",-1)),q={class:"col mb-3"},z={class:"col mb-3"},G=n(()=>e("span",{class:"pointer me-2"},"沒有會員嗎?",-1));function H(t,o,m,s,i,u){const d=r("v-field"),p=r("ErrorMessage"),g=r("router-link"),b=r("v-form");return w(),v(B,null,[R,N,a(b,{ref:"myForm",onSubmit:o[4]||(o[4]=c=>u.userLogin())},{default:h(({errors:c})=>[e("div",I,[e("div",L,[T,a(d,{name:"email",id:"email",type:"email",class:_(["form-control",{"is-invalid":c.email}]),label:"帳號",placeholder:"hello@exsample.com",modelValue:i.userAccount.email,"onUpdate:modelValue":o[0]||(o[0]=l=>i.userAccount.email=l),rules:"required"},null,8,["class","modelValue"]),a(p,{name:"email",class:"invalid-feedback"})]),e("div",j,[J,a(d,{name:"password",type:"password",label:"密碼",class:_(["form-control",{"is-invalid":c.password}]),id:"password",placeholder:"請輸入密碼",modelValue:i.userAccount.password,"onUpdate:modelValue":o[1]||(o[1]=l=>i.userAccount.password=l),rules:"required"},null,8,["class","modelValue"]),a(p,{name:"password",class:"invalid-feedback"}),e("div",D,[e("div",M,[x(e("input",{class:"form-check-input",type:"checkbox",value:"",id:"isRememberAccount","onUpdate:modelValue":o[2]||(o[2]=l=>i.loginSetting.isRememberAccount=l)},null,512),[[F,i.loginSetting.isRememberAccount]]),O]),$])]),e("div",q,[e("button",{type:"button",class:"btn py-3 btn-white w-100 site_button text-gray",onClick:o[3]||(o[3]=(...l)=>u.userLogin&&u.userLogin(...l))}," 會員登入 ")]),e("div",z,[G,a(g,{to:{name:"register"},role:"button",class:"text-decoration-underline text-primary pointer"},{default:h(()=>[k("前往註冊")]),_:1})])])]),_:1},512)],64)}const W=C(U,[["render",H],["__scopeId","data-v-1b9e4cfe"]]);export{W as default};
